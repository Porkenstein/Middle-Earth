namespace = profession_events
character_event = {
	id = profession_events.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_profession_trigger = yes
		}
	}

	immediate = {
		random_list = {
			#Musician
			9 = {
				add_trait = novice_musician
			}
			1 = {
				add_trait = adept_musician
			}
			#Craftsman
			5 = {
				add_trait = novice_craftsman
			}
			1 = {
				add_trait = adept_craftsman
			}
			#Magic
			3 = {
				modifier = {
					factor = 0
					NOT = {
						mep_is_good_side_trigger = yes
					}
				}
				add_trait = novice_sorcerer
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						mep_is_good_side_trigger = yes
					}
				}
				add_trait = adept_sorcerer
			}
			#Healing
			4 = {
				modifier = {
					factor = 0
					NOT = {
						mep_is_evil_side_trigger = yes
					}
				}
				add_trait = novice_healer
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						mep_is_evil_side_trigger = yes
					}
				}
				add_trait = adept_healer
			}
		}
		IF = {
			limit = {
				ai = no
			}
			character_event = {
				id = profession_events.11
			}
		}
	}
}
character_event = {
	id = profession_events.10
	hide_window = yes
	min_age = 16

	trigger = {
		NOT = {
			has_profession_trigger = yes
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		random_list = {
			#Musician
			9 = {
				add_trait = novice_musician
			}
			1 = {
				add_trait = adept_musician
			}
			#Craftsman
			5 = {
				add_trait = novice_craftsman
			}
			1 = {
				add_trait = adept_craftsman
			}
			#Magic
			3 = {
				add_trait = novice_sorcerer
			}
			1 = {
				add_trait = adept_sorcerer
			}
			#Healing
			4 = {
				add_trait = novice_healer
			}
			1 = {
				add_trait = adept_healer
			}
		}
	}
}
character_event = {
	id = profession_events.11
	desc = {
		text = EVTDESCAprofession_events.11
		trigger = {
			is_musician_trigger = yes
		}
	}
	desc = {
		text = EVTDESCBprofession_events.11
		trigger = {
			is_craftsman_trigger = yes
		}
	}
	desc = {
		text = EVTDESCCprofession_events.11
		trigger = {
			is_sorcerer_trigger = yes
		}
	}
	desc = {
		text = EVTDESCDprofession_events.11
		trigger = {
			is_healer_trigger = yes
		}
	}
	picture = GFX_placeholder
	is_triggered_only = yes

	option = {
		name = EVTOPTAprofession_events.11
	}
}
character_event = {
	id = profession_events.12
	desc = {
		text = EVTDESCAprofession_events.12
		trigger = {
			is_musician_trigger = yes
		}
	}
	desc = {
		text = EVTDESCBprofession_events.12
		trigger = {
			is_craftsman_trigger = yes
		}
	}
	desc = {
		text = EVTDESCCprofession_events.12
		trigger = {
			is_sorcerer_trigger = yes
		}
	}
	desc = {
		text = EVTDESCDprofession_events.12
		trigger = {
			is_healer_trigger = yes
		}
	}
	picture = GFX_placeholder

	trigger = {
		has_profession_trigger = yes
		NOR = {
			trait = master_musician
			trait = master_craftsman
			trait = master_sorcerer
			trait = master_healer
		}
	}

	mean_time_to_happen = {
		years = 10
		modifier = {
			factor = 0.5
			OR = {
				has_ambition = obj_mastery_music
				has_ambition = obj_mastery_craft
				has_ambition = obj_mastery_sorcery
				has_ambition = obj_mastery_healing
			}
		}
		modifier = {
			factor = 3
			OR = {
				trait = skilled_musician
				trait = skilled_craftsman
				trait = skilled_sorcerer
				trait = skilled_healer
			}
		}
		modifier = {
			factor = 3
			OR = {
				trait = adept_musician
				trait = adept_craftsman
				trait = adept_sorcerer
				trait = adept_healer
				trait = skilled_musician
				trait = skilled_craftsman
				trait = skilled_sorcerer
				trait = skilled_healer
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				trait = skilled_sorcerer
				trait = skilled_healer
			}
		}
		modifier = {
			factor = 2
			OR = {
				trait = adept_sorcerer
				trait = adept_healer
				trait = skilled_sorcerer
				trait = skilled_healer
			}
		}
	}

	option = {
		name = EVTOPTAprofession_events.12
		#Musician
		IF = {
			limit = {
				trait = skilled_musician
			}
			remove_trait = skilled_musician
			add_trait = master_musician
		}
		IF = {
			limit = {
				trait = adept_musician
			}
			remove_trait = adept_musician
			add_trait = skilled_musician
		}
		IF = {
			limit = {
				trait = novice_musician
			}
			remove_trait = novice_musician
			add_trait = adept_musician
		}
		#Craftsman
		IF = {
			limit = {
				trait = skilled_craftsman
			}
			remove_trait = skilled_craftsman
			add_trait = master_craftsman
		}
		IF = {
			limit = {
				trait = adept_craftsman
			}
			remove_trait = adept_craftsman
			add_trait = skilled_craftsman
		}
		IF = {
			limit = {
				trait = novice_craftsman
			}
			remove_trait = novice_craftsman
			add_trait = adept_craftsman
		}
		#Magic
		IF = {
			limit = {
				trait = skilled_sorcerer
			}
			remove_trait = skilled_sorcerer
			add_trait = master_sorcerer
		}
		IF = {
			limit = {
				trait = adept_sorcerer
			}
			remove_trait = adept_sorcerer
			add_trait = skilled_sorcerer
		}
		IF = {
			limit = {
				trait = novice_sorcerer
			}
			remove_trait = novice_sorcerer
			add_trait = adept_sorcerer
		}
		#Healing
		IF = {
			limit = {
				trait = skilled_healer
			}
			remove_trait = skilled_healer
			add_trait = master_healer
		}
		IF = {
			limit = {
				trait = adept_healer
			}
			remove_trait = adept_healer
			add_trait = skilled_healer
		}
		IF = {
			limit = {
				trait = novice_healer
			}
			remove_trait = novice_healer
			add_trait = adept_healer
		}
	}
}
character_event = {
	id = profession_events.2
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_combat_prowess_trigger = yes
		}
	}

	immediate = {
		random_list = {
			#Swordsman
			9 = {
				add_trait = novice_fighter
			}
			1 = {
				add_trait = adept_fighter
			}
		}
		IF = {
			limit = {
				ai = no
			}
			character_event = {
				id = profession_events.21
			}
		}
	}
}
character_event = {
	id = profession_events.21
	desc = EVTDESCprofession_events.21
	picture = GFX_placeholder
	is_triggered_only = yes

	option = {
		name = EVTOPTAprofession_events.21
	}
}
character_event = {
	id = profession_events.22
	desc = EVTDESCprofession_events.22
	picture = GFX_placeholder

	trigger = {
		has_combat_prowess_trigger = yes
		NOT = {
			trait = master_fighter
		}
	}

	mean_time_to_happen = {
		years = 10
		modifier = {
			factor = 0.5
			has_ambition = obj_mastery_combat
		}
		modifier = {
			factor = 2
			OR = {
				trait = adept_fighter
				trait = skilled_fighter
			}
		}
		modifier = {
			factor = 2
			trait = skilled_fighter
		}
	}

	option = {
		name = EVTOPTAprofession_events.22
		#Fighter
		IF = {
			limit = {
				trait = skilled_fighter
			}
			remove_trait = skilled_fighter
			add_trait = master_fighter
		}
		IF = {
			limit = {
				trait = adept_fighter
			}
			remove_trait = adept_fighter
			add_trait = skilled_fighter
		}
		IF = {
			limit = {
				trait = novice_fighter
			}
			remove_trait = novice_fighter
			add_trait = adept_fighter
		}
	}
}
character_event = {
	id = profession_events.20
	hide_window = yes

	min_age = 16

	trigger = {
		NOT = {
			has_combat_prowess_trigger = yes
		}
	}

	mean_time_to_happen = {
		months = 6
	}

	immediate = {
		random_list = {
			#Swordsman
			9 = {
				add_trait = novice_fighter
			}
			1 = {
				add_trait = adept_fighter
			}
		}
	}
}
character_event = {
	id = profession_events.3
	desc = EVTDESCprofession_events.3
	picture = GFX_placeholder
	is_triggered_only = yes

	trigger = {
		has_ambition = obj_change_profession
		NOR = {
			has_character_flag = change_musician
			has_character_flag = change_craftsman
			has_character_flag = change_sorcerer
			has_character_flag = change_healer
		}
	}

	option = {
		name = EVTOPTAprofession_events.3
		trigger = {
			NOT = {
				is_musician_trigger = yes
			}
		}
		set_character_flag = change_musician
	}

	option = {
		name = EVTOPTBprofession_events.3
		trigger = {
			NOT = {
				is_craftsman_trigger = yes
			}
		}
		set_character_flag = change_craftsman
	}

	option = {
		name = EVTOPTCprofession_events.3
		trigger = {
			NOT = {
				is_sorcerer_trigger = yes
			}
			OR = {
				mep_is_evil_side_trigger = yes
				ai = no
			}
		}
		custom_tooltip = {
			text = become_corrupt_tooltip
			IF = {
				limit = {
					NOR = {
						mep_is_evil_side_trigger = yes
						has_character_flag = corrupted
					}
				}
				set_character_flag = corrupted
			}
			set_character_flag = change_sorcerer
		}
	}

	option = {
		name = EVTOPTDprofession_events.3
		trigger = {
			NOR = {
				is_healer_trigger = yes
				mep_is_evil_side_trigger = yes
			}
		}
		set_character_flag = change_healer
	}

	option = {
		name = EVTOPTEprofession_events.3
		cancel_ambition = yes
	}
}
character_event = {
	id = profession_events.31
	desc = EVTDESCprofession_events.31
	picture = GFX_placeholder
	is_triggered_only = yes

	trigger = {
		OR = {
			has_character_flag = change_musician
			has_character_flag = change_craftsman
			has_character_flag = change_sorcerer
			has_character_flag = change_healer
		}
	}

	immediate = {
		remove_trait = novice_musician
		remove_trait = adept_musician
		remove_trait = skilled_musician
		remove_trait = master_musician
		remove_trait = novice_craftsman
		remove_trait = adept_craftsman
		remove_trait = skilled_craftsman
		remove_trait = master_craftsman
		remove_trait = novice_sorcerer
		remove_trait = adept_sorcerer
		remove_trait = skilled_sorcerer
		remove_trait = master_sorcerer
		remove_trait = novice_healer
		remove_trait = adept_healer
		remove_trait = skilled_healer
		remove_trait = master_healer
		random_list = {
			9 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_musician
					}
				}
				add_trait = novice_musician
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_musician
					}
				}
				add_trait = skilled_musician
			}
			9 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_craftsman
					}
				}
				add_trait = novice_craftsman
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_craftsman
					}
				}
				add_trait = skilled_craftsman
			}
			9 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_sorcerer
					}
				}
				add_trait = novice_sorcerer
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_sorcerer
					}
				}
				add_trait = skilled_sorcerer
			}
			9 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_healer
					}
				}
				add_trait = novice_healer
			}
			1 = {
				modifier = {
					factor = 0
					NOT = {
						has_character_flag = change_healer
					}
				}
				add_trait = skilled_healer
			}
		}
	}
	option = {
		name = EVTOPTAprofession_events.31
		clr_character_flag = change_musician
		clr_character_flag = change_craftsman
		clr_character_flag = change_sorcerer
		clr_character_flag = change_healer
		clr_character_flag = change_profession
	}
}

# Sorcerer Events
character_event = {
	id = profession_events.61
	desc = EVTDESCprofession_events.61
	picture = GFX_placeholder
	is_triggered_only = yes

	option = {
		name = EVTOPTAprofession_events.61
		death = {
			death_reason = death_sacrificed
			killer = FROMFROM
		}
	}
}
character_event = {
	id = profession_events.62
	desc = EVTDESCprofession_events.62
	picture = GFX_placeholder
	is_triggered_only = yes

	option = {
		name = EVTOPTAprofession_events.62
		trigger = {
			NOR = {
				has_character_flag = sorcerer_stressed
				has_character_flag = sorcerer_depressed
				has_character_flag = sorcerer_lunatic
				has_character_flag = sorcerer_wight
			}
		}
	}

	option = {
		name = EVTOPTBprofession_events.62
		trigger = {
			has_character_flag = sorcerer_stressed
		}
		clr_character_flag = sorcerer_stressed
	}

	option = {
		name = EVTOPTCprofession_events.62
		trigger = {
			has_character_flag = sorcerer_depressed
		}
		clr_character_flag = sorcerer_depressed
	}

	option = {
		name = EVTOPTDprofession_events.62
		trigger = {
			has_character_flag = sorcerer_lunatic
		}
		clr_character_flag = sorcerer_lunatic
	}

	option = {
		name = EVTOPTEprofession_events.62
		trigger = {
			has_character_flag = sorcerer_wight
		}
		clr_character_flag = sorcerer_wight
	}
}
character_event = {
	id = profession_events.63
	desc = EVTDESCprofession_events.63
	picture = GFX_placeholder
	is_triggered_only = yes

	option = {
		name = EVTOPTAprofession_events.63
		trigger = {
			trait = stressed
		}
	}

	option = {
		name = EVTOPTBprofession_events.63
		trigger = {
			trait = depressed
		}
	}

	option = {
		name = EVTOPTCprofession_events.63
		trigger = {
			trait = lunatic
		}
	}

	option = {
		name = EVTOPTDprofession_events.63
		trigger = {
			trait = incapable
		}
	}
}

# Healer Events
character_event = {
	id = profession_events.7
	desc = EVTDESCprofession_events.7
	picture = GFX_placeholder
	is_triggered_only = yes

	option = {	#Purchase Supplies
		name = EVTOPTAprofession_events.7
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				wealth = 300
			}
			modifier = {
				factor = 5
				wealth = 400
			}
			modifier = {
				factor = 5
				wealth = 500
			}
		}
		wealth = -100
		set_character_flag = bought_supplies
	}

	option = {	#Forage Supplies
		name = EVTOPTBprofession_events.7
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0.95
				wealth = 300
			}
			modifier = {
				factor = 0.5
				wealth = 400
			}
			modifier = {
				factor = 0.5
				wealth = 500
			}
		}
	}

	option = {	#Cancel
		name = EVTOPTCprofession_events.7
		trigger = {
			ai = no
		}
		clr_character_flag = crafting_potion
	}
}
character_event = {
	id = profession_events.71
	desc = EVTDESCprofession_events.71
	picture = GFX_placeholder

	trigger = {
		has_character_flag = crafting_potion
	}

	mean_time_to_happen = {
		years = 2
		modifier = {
			factor = 0.25
			has_character_flag = bought_supplies
		}
	}

	option = {
		name = EVTOPTAprofession_events.71
		clr_character_flag = crafting_potion
		clr_character_flag = bought_supplies
		add_artifact = artifact_potion
	}
}
character_event = {
	id = profession_events.72
	desc = EVTDESCprofession_events.72
	picture = GFX_placeholder
	is_triggered_only = yes

	option = {
		name = EVTOPTAprofession_events.72
		trigger = {
			NOT = {
				trait = incapable
			}
		}
		opinion = {
			modifier = opinion_grateful
			who = FROM
		}
	}

	option = {
		name = EVTOPTAprofession_events.72
		trigger = {
			trait = incapable
		}
		opinion = {
			modifier = opinion_angry
			who = FROM
			years = 1
		}
	}
}