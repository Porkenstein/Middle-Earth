namespace = dwarf_colonisation

##############################
# DWARF COLONISATION
# random events,
# targetted decision events,
# character decision events
##############################

character_event = { # Somebody wants to colonise some wilderness. random yearly on_action
	id = dwarf_colonisation.0
    desc = "EVTDESCMEP_dwarves.0"
	picture = GFX_dwarves_court

    religion = religion_mahal
    is_triggered_only = yes

    trigger = {
        is_councillor = yes
        liege = {
            NOT = { has_character_modifier = dwarf_colonist }
            prestige = 200
            wealth = 200
            OR = {
                liege = { ai = no }
                liege = { independent = yes }
            }
            can_send_mining_expedition = yes
            any_independent_ruler = {
                religion = religion_wilderness
                NOT = { in_hidden_province = yes }
                is_within_diplo_range = PREV
                location = {
                    NOT = { is_unattractive_colonisation_target = yes }
                    NOT = { has_province_flag = mining_target }
                }
            }
        }
    }

    immediate = {
        liege = {
            set_character_flag = sending_mining_expedition
        }
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.0"

        save_event_target_as = target_expedition_councillor

        trigger = {
			NOT = { trait = slothful } #haha
		}

        hidden_tooltip = {

            # first look for a mountainous place with resources
            # TODO use preferred_limit 
            random_independent_ruler = {
                limit = {
                    NOT = { in_hidden_province = yes }
                    religion = religion_wilderness
                    is_within_diplo_range = PREV
                    location = {
                        NOT = { is_unattractive_colonisation_target = yes }
                        NOT = { has_province_flag = mining_target }
                        has_known_resources = yes
                        is_mining_target = yes
                    }
                }
                location = {
                    set_province_flag = mining_target
                    save_event_target_as = target_mining_target
                }
                save_event_target_as = target_mining_target_owner
                ROOT = {
                    liege = {
                        character_event = { id = dwarf_colonisation.1 }
                    }
                }
                break = yes
            }
        
            # next look for mountains
            random_independent_ruler = {
                limit = {
                    religion = religion_wilderness
                    NOT = { in_hidden_province = yes }
                    is_within_diplo_range = PREV
                    location = {
                        NOT = { is_unattractive_colonisation_target = yes }
                        NOT = { has_province_flag = mining_target }
                        is_mining_target = yes
                    }
                }
                location = {
                    set_province_flag = mining_target
                    save_event_target_as = target_mining_target
                }
                save_event_target_as = target_mining_target_owner
                ROOT = {
                    liege = {
                        character_event = { id = dwarf_colonisation.1 }
                    }
                }
                break = yes
            }

            # then look for resources
            random_independent_ruler = {
                limit = {
                    religion = religion_wilderness
                    NOT = { in_hidden_province = yes }
                    is_within_diplo_range = PREV
                    location = {
                        NOT = { is_unattractive_colonisation_target = yes }
                        NOT = { has_province_flag = mining_target }
                        has_known_resources = yes
                    }
                }
                location = {
                    set_province_flag = mining_target
                    save_event_target_as = target_mining_target
                }
                save_event_target_as = target_mining_target_owner
                ROOT = {
                    liege = {
                        character_event = { id = dwarf_colonisation.1 }
                    }
                }
                break = yes
            }
                
            # finally accept anything
            random_independent_ruler = {
                limit = {
                    religion = religion_wilderness
                    NOT = { in_hidden_province = yes }
                    is_within_diplo_range = PREV
                    location = {
                        NOT = { is_unattractive_colonisation_target = yes }
                        NOT = { has_province_flag = mining_target }
                    }
                }
                location = {
                    set_province_flag = mining_target
                    save_event_target_as = target_mining_target
                }
                save_event_target_as = target_mining_target_owner
                ROOT = {
                    liege = {
                        character_event = { id = dwarf_colonisation.1 }
                    }
                }
                break = yes
            }

            # couldn't find a target, reset the flags
            liege = {
                clear_mining_expedition_flags = yes
            }
        }
	}
	option = {
		trigger = {
			NOT = { trait = diligent }
		}
		name = "EVTOPTMEP_dwarves_B.0"
        piety = -20
        liege = {
            clear_mining_expedition_flags = yes
        }
	}
}

narrative_event = { # Liege is informed
	id = dwarf_colonisation.1
    title = "EVTNAMEMEP_dwarves.1"
    desc = "EVTDESCMEP_dwarves.1"
	picture = GFX_dwarves_court

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.1"
        wealth = -200
        set_character_flag = good_sponsorship
        event_target:target_mining_target = {
            owner = {
                if = {
                    limit = { religion_group = religion_group_melkor }
                    character_event = { id = dwarf_colonisation.21 days = 15 }
                }
                else = {
                    character_event = { id = dwarf_colonisation.20 days = 15 }
                }
            }
        }
	}
	option = {
		name = "EVTOPTMEP_dwarves_B.1"
        piety = -20
        set_character_flag = bad_sponsorship
        set_character_flag = no_sponsorship
        event_target:target_mining_target = {
            owner = {
                if = {
                    limit = { religion_group = religion_group_melkor }
                    character_event = { id = dwarf_colonisation.21 days = 15 }
                }
                else = {
                    character_event = { id = dwarf_colonisation.20 days = 15 }
                }
            }
        }
	}
	option = {
		trigger = {
			NOT = { trait = craven }
		}
		name = "EVTOPTMEP_dwarves_C.1"
        set_character_flag = ruler_expedition_leader
        save_event_target_as = target_expedition_leader
        wealth = -100
        prestige = 20
        event_target:target_mining_target = {
            owner = {
                if = {
                    limit = { religion_group = religion_group_melkor }
                    character_event = { id = dwarf_colonisation.21 days = 15 }
                }
                else = {
                    character_event = { id = dwarf_colonisation.20 days = 15 }
                }
            }
        }
	}
	option = {
        trigger = { ai = no }
		name = "EVTOPTMEP_dwarves_D.1"
        set_character_flag = councillor_expedition_leader
        FROM = { save_event_target_as = target_expedition_leader }
        wealth = -100
        event_target:target_mining_target = {
            owner = {
                if = {
                    limit = { religion_group = religion_group_melkor }
                    character_event = { id = dwarf_colonisation.21 days = 15 }
                }
                else = {
                    character_event = { id = dwarf_colonisation.20 days = 15 }
                }
            }
        }
	}
}

character_event = { # Targetted/character decision is sent to the councillor
	id = dwarf_colonisation.19
    desc = "EVTDESCMEP_dwarves.19"
	picture = GFX_dwarves_court

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.19"

        save_event_target_as = target_expedition_councillor

        liege = {
            letter_event = { id = dwarf_colonisation.2 }

            hidden_tooltip = {
                if = {
                    limit = {
                        random = 70 # chance of failure if we recently sent out colonists
                        has_character_modifier = dwarf_colonist
                    }
                    letter_event = { id = dwarf_colonisation.3 days = 30 }
                }
                else_if = {
                    limit = {
                        random = 70 # chance of failure if there are no good-looking wilderness counties nearby
                        NOT = {
                            any_independent_ruler = {
                                religion = religion_wilderness
                                NOT = { in_hidden_province = yes }
                                is_within_diplo_range = PREV
                                location = {
                                    NOT = { has_province_flag = mining_target }
                                    OR = {
                                        has_known_resources = yes
                                        is_mining_target = yes
                                    }
                                }
                            }
                        }
                    }
                    letter_event = { id = dwarf_colonisation.4 days = 30 }
                }
                else = { # found colonists!
                    narrative_event = { id = dwarf_colonisation.5 days = 30 }
                }
            }
        }
	}
}

letter_event = { # Liege receives reply about councillor helping
	id = dwarf_colonisation.2
    desc = "EVTDESCMEP_dwarves.2"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.2"
	}
}

letter_event = { # Liege receives reply - no colonists found!
	id = dwarf_colonisation.3
    desc = "EVTDESCMEP_dwarves.3"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.3"
        prestige = -10
        wealth = 100 # refund
	}
}

letter_event = { # Liege receives reply - no nearby wilderness found!
	id = dwarf_colonisation.4
    desc = "EVTDESCMEP_dwarves.4"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.4"
        prestige = -10
        wealth = 100 # refund
	}
}

narrative_event = { # Liege receives reply - colonists found!
	id = dwarf_colonisation.5
    title = "EVTNAMEMEP_dwarves.5"
    desc = "EVTDESCMEP_dwarves.5"
	picture = GFX_dwarves_court

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.5"
        wealth = -100
        set_character_flag = good_sponsorship
        hidden_tooltip = {
            if = {
                limit = { NOT = { has_character_flag = targetting_province_for_expedition } }
                character_event = { id = dwarf_colonisation.6 days = 15 }
            }
            else = {
                event_target:target_mining_target = {
                    owner = {
                        if = {
                            limit = { religion_group = religion_group_melkor }
                            character_event = { id = dwarf_colonisation.21 days = 15 }
                        }
                        else = {
                            character_event = { id = dwarf_colonisation.20 days = 15 }
                        }
                    }
                }
            }
        }
	}

	option = {
		name = "EVTOPTMEP_dwarves_B.5"
        set_character_flag = poor_sponsorship
        piety = -20
        hidden_tooltip = {
            if = {
                limit = { NOT = { has_character_flag = targetting_province_for_expedition } }
                character_event = { id = dwarf_colonisation.6 days = 15 }
            }
            else = {
                event_target:target_mining_target = {
                    owner = {
                        if = {
                            limit = { religion_group = religion_group_melkor }
                            character_event = { id = dwarf_colonisation.21 days = 15 }
                        }
                        else = {
                            character_event = { id = dwarf_colonisation.20 days = 15 }
                        }
                    }
                }
            }
        }
	}

	option = {
		trigger = {
			NOT = { trait = craven }
		}
		name = "EVTOPTMEP_dwarves_C.5"
        set_character_flag = ruler_expedition_leader
        save_event_target_as = target_expedition_leader
        prestige = 20
        hidden_tooltip = {
            if = {
                limit = { NOT = { has_character_flag = targetting_province_for_expedition } }
                character_event = { id = dwarf_colonisation.6 days = 15 }
            }
            else = {
                event_target:target_mining_target = {
                    owner = {
                        if = {
                            limit = { religion_group = religion_group_melkor }
                            character_event = { id = dwarf_colonisation.21 days = 15 }
                        }
                        else = {
                            character_event = { id = dwarf_colonisation.20 days = 15 }
                        }
                    }
                }
            }
        }
	}

	option = {
        trigger = { ai = no }
		name = "EVTOPTMEP_dwarves_D.5"
        set_character_flag = councillor_expedition_leader
        FROM = { save_event_target_as = target_expedition_leader }
        hidden_tooltip = {
            if = {
                limit = { NOT = { has_character_flag = targetting_province_for_expedition } }
                character_event = { id = dwarf_colonisation.6 days = 15 }
            }
            else = {
                event_target:target_mining_target = {
                    owner = {
                        if = {
                            limit = { religion_group = religion_group_melkor }
                            character_event = { id = dwarf_colonisation.21 days = 15 }
                        }
                        else = {
                            character_event = { id = dwarf_colonisation.20 days = 15 }
                        }
                    }
                }
            }
        }
	}
}

character_event = { # where to send colonists?
	id = dwarf_colonisation.6
    desc = "EVTDESCMEP_dwarves.6"
	picture = GFX_dwarves_court

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.6"
        trigger = {
            any_independent_ruler = {
                religion = religion_wilderness
                NOT = { in_hidden_province = yes }
                is_within_diplo_range = PREV
                 location = {
                    NOT = { has_province_flag = mining_target }
                 }
            }
        }

        # accept any wilderness
        random_independent_ruler = {
            limit = {
                religion = religion_wilderness
                NOT = { in_hidden_province = yes }
                is_within_diplo_range = PREV
                location = {
                    NOT = { has_province_flag = mining_target }
                }
            }
            location = {
                set_province_flag = mining_target
                save_event_target_as = target_mining_target
                owner = {
                    save_event_target_as = target_mining_target_owner
                }
            }
            character_event = { id = dwarf_colonisation.20 days = 10 }
        }
	}

	option = {
		name = "EVTOPTMEP_dwarves_B.6"

        trigger = {
            any_province = {
                NOT = { in_hidden_province = yes }
                OR = {
                    de_jure_liege_or_above = k_iron_mountains
                    de_jure_liege_or_above = k_forodwaith
                    de_jure_liege_or_above = d_ered_gorgoroth
                }
                owner = { is_dark_lord = no }
                NOT = { has_province_flag = mining_target }
            }
        }

        # northern mountains
        random_province = {
            limit = {
                NOT = { in_hidden_province = yes }
                OR = {
                    de_jure_liege_or_above = k_iron_mountains
                    de_jure_liege_or_above = k_forodwaith
                    de_jure_liege_or_above = d_ered_gorgoroth
                }
                owner = { is_dark_lord = no }
                NOT = { has_province_flag = mining_target }
            }
            set_province_flag = mining_target
            save_event_target_as = target_mining_target
            owner = {
                save_event_target_as = target_mining_target_owner
                if = {
                    limit = { religion_group = religion_group_melkor }
                    character_event = { id = dwarf_colonisation.21 days = 15 }
                }
                else = {
                    character_event = { id = dwarf_colonisation.20 days = 15 }
                }
            }
        }
	}

	option = {
		name = "EVTOPTMEP_dwarves_C.6"
        # look for a place with resources
        random_province = {
            limit = {
                NOT = { in_hidden_province = yes }
                OR = {
                    has_known_resources = yes
		            terrain = mountain
                }
                NOT = { has_province_flag = mining_target }
                owner = {
                    NOT = { same_realm = ROOT }
                }
            }
            set_province_flag = mining_target
            save_event_target_as = target_mining_target
            owner = {
                save_event_target_as = target_mining_target_owner
                if = {
                    limit = { religion_group = religion_group_melkor }
                    character_event = { id = dwarf_colonisation.21 days = 15 }
                }
                else = {
                    character_event = { id = dwarf_colonisation.20 days = 15 }
                }
            }
        }
	}

	option = {
		name = "EVTOPTMEP_dwarves_D.6"
        wealth = 200
        prestige = -10
        clear_mining_expedition_flags = yes
	}
}


character_event = { # the dwarves are coming
	id = dwarf_colonisation.20
    desc = "EVTDESCMEP_dwarves.20"
   	picture = GFX_dwarves_caravan


	notification = no
    is_triggered_only = yes

    option = {
        trigger = {
            religion = religion_wilderness
        }
        name = OK
        FROM = {
            if = {
                limit = {
                    has_character_flag = ruler_expedition_leader
                }
                character_event = { id = dwarf_colonisation.8 }
            }
            else = {
                character_event = { id = dwarf_colonisation.7 }
            }
        }
    }

	option = {
        trigger = {
            NOT = { trait = zealous }
            NOT = { religion = religion_wilderness }
        }

		name = "EVTOPTMEP_dwarves_A.20"
        prestige = -100
        random = {
            chance = 30
            add_trait = dwarf_friend
        }
        FROM = {
            if = {
                limit = {
                    has_character_flag = ruler_expedition_leader
                }
                character_event = { id = dwarf_colonisation.8 }
            }
            else = {
                character_event = { id = dwarf_colonisation.7 }
            }
        }
	}

    option = {
        trigger = {
            NOT = { trait = zealous }
            NOT = { religion = religion_wilderness }
        }

		name = "EVTOPTMEP_dwarves_B.20"
        prestige = -50
        random = {
            chance = 10
            add_trait = greedy
        }
        FROM = {
            if = {
                limit = {
                    has_character_flag = ruler_expedition_leader
                }
                character_event = { id = dwarf_colonisation.8 }
            }
            else = {
                character_event = { id = dwarf_colonisation.7 }
            }

            # reply with a letter
            letter_event = { id = dwarf_colonisation.38 days = 60 }
        }
	}

    option = {
        trigger = {
            OR = {
                NOT = { trait = dwarf_friend }
                ai = no
            }
            NOT = { religion = religion_wilderness }
        }

		name = "EVTOPTMEP_dwarves_C.20"
        prestige = 100
        remove_trait = dwarf_friend
        random = {
            chance = 10
            add_trait = zealous
        }

        FROM = { # send force to conquer it unless they back off! (todo send the event)

            random = {
                chance = 30
                modifier = {
                    factor = 0.5
                    ROOT = { NOT = { martial = 10 } }
                }
                modifier = {
                    factor = 2.0
                    ROOT = { martial = 20 }
                }
                modifier = {
                    factor = 1.5
                    NOT = { martial = 10 }
                }
                modifier = {
                    factor = 0.75
                    martial = 20
                }
                set_character_flag = mining_expedition_conquered
            }
            if = {
                limit = {
                    has_character_flag = ruler_expedition_leader
                }
                character_event = { id = dwarf_colonisation.8 }
            }
            else = {
                character_event = { id = dwarf_colonisation.7 }
            }

            # reply with a letter
            letter_event = { id = dwarf_colonisation.39 days = 60 }
        }
	}
}

character_event = { # the dwarves are coming - melkorish
	id = dwarf_colonisation.21
    desc = "EVTDESCMEP_dwarves.21"
   	picture = GFX_dwarves_caravan

	notification = no
    is_triggered_only = yes

	option = {
        trigger = {
            NOT = { trait = zealous }
        }

		name = "EVTOPTMEP_dwarves_A.21"
        prestige = -100
        random = {
            chance = 30
            add_trait = dwarf_friend
        }
        FROM = {
            if = {
                limit = {
                    has_character_flag = ruler_expedition_leader
                }
                character_event = { id = dwarf_colonisation.8 }
            }
            else = {
                character_event = { id = dwarf_colonisation.7 }
            }
        }
	}

    option = {
		name = "EVTOPTMEP_dwarves_B.21"
        prestige = -50
        random = {
            chance = 10
            add_trait = zealous
        }
        FROM = {

            random = {
                chance = 30
                modifier = {
                    factor = 0.5
                    ROOT = { NOT = { martial = 10 } }
                }
                modifier = {
                    factor = 2.0
                    ROOT = { martial = 20 }
                }
                modifier = {
                    factor = 1.5
                    NOT = { martial = 10 }
                }
                modifier = {
                    factor = 0.75
                    martial = 20
                }
                set_character_flag = mining_expedition_destroyed
            }
            if = {
                limit = {
                    has_character_flag = ruler_expedition_leader
                }
                character_event = { id = dwarf_colonisation.8 }
            }
            else = {
                character_event = { id = dwarf_colonisation.7 }
            }
        }
	}

    option = {
        trigger = {
            OR = {
                NOT = { trait = zealous }
                ai = no
            }
        }

		name = "EVTOPTMEP_dwarves_C.21"
        wealth = -100
        random = {
            chance = 10
            remove_trait = zealous
        }
        hidden_tooltip = {
            random = {
                chance = 50

                modifier = {
                    factor = 0.5
                    ROOT = { NOT = { diplomacy = 10 } }
                }
                modifier = {
                    factor = 2.0
                    ROOT = { diplomacy = 20 }
                }
                modifier = {
                    factor = 1.5
                    NOT = { diplomacy = 10 }
                }
                modifier = {
                    factor = 0.75
                    diplomacy = 20
                }

                FROM = {
                    character_event = { id = dwarf_colonisation.40 days = 60 } # the dwarves were bribed!
                }
            }
        }
	}
}

character_event = { # Colonists left
	id = dwarf_colonisation.7
    picture = GFX_dwarves_caravan
    desc = "EVTDESCMEP_dwarves.7"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.7"
        hidden_tooltip = {
            character_event = { id = dwarf_colonisation.10 days = 395 }
        }
	}
}

character_event = { # I left
	id = dwarf_colonisation.8
    picture = GFX_dwarves_caravan
    desc = "EVTDESCMEP_dwarves.8"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.8"
        add_trait = on_adventure
        prestige = 10
        hidden_tooltip = {
            character_event = { id = dwarf_colonisation.9 days = 30 }
        }
	}
}

long_character_event = { # I begin the return journey
	id = dwarf_colonisation.9
    picture = GFX_dwarves_caravan
    desc = "EVTDESCMEP_dwarves.9"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.9"
        hidden_tooltip = {
            character_event = { id = dwarf_colonisation.22 days = 30 }
        }
	}
}

character_event = { # Remove adventure trait
	id = dwarf_colonisation.22
    hide_window = yes

	notification = no
    is_triggered_only = yes

	option = {
        remove_trait = on_adventure
        hidden_tooltip = {
            character_event = { id = dwarf_colonisation.10 days = 335 }
        }
	}
}

character_event = { # One year since the mining expedition - lets check up on them
	id = dwarf_colonisation.10
    picture = GFX_dwarves_caravan
    desc = "EVTDESCMEP_dwarves.10"

	notification = no
    is_triggered_only = yes

    trigger = {
        # still applicable
        has_character_flag = sending_mining_expedition
    }

    immediate = {
        add_character_modifier = { name = dwarf_colonist duration = 3650 }

        if = {
            limit = {
                NOR = { # has the outcome already been decided?
                    has_character_flag = mining_expedition_destroyed
                    has_character_flag = mining_expedition_conquered
                }
            }

            # determine if the expedition was a success
            random_list = {
                10 = {
                    set_character_flag = mining_expedition_destroyed

                    modifier = {
                        factor = 0
                        event_target:target_mining_target = {
                            owner = {
                                NOR = {
                                    religion_group = religion_group_melkor
                                    religion = religion_wilderness
                                    trait = evil_side
                                }
                            }
                        }
                    }
                    modifier = {
                        factor = 0.5
                        NOT = { has_global_flag = broken_siege_of_angband }
                    }
                    modifier = {
                        factor = 2
                        AND = {
                            OR = {
                                has_character_flag = ruler_expedition_leader
                                has_character_flag = councillor_expedition_leader
                            }
                            event_target:target_expedition_leader = {
                                NOT = { martial = 10 }
                            }
                        }
                    }
                }
                10 = {
                    set_character_flag = mining_expedition_conquered
                    modifier = {
                        factor = 0.5
                        diplomacy = 20
                    }
                    modifier = {
                        factor = 2
                        AND = {
                            OR = {
                                has_character_flag = ruler_expedition_leader
                                has_character_flag = councillor_expedition_leader
                            }
                            event_target:target_expedition_leader = {
                                NOT = { intrigue = 10 }
                            }
                        }
                    }
                    modifier = {
                        factor = 0
                        OR = {
                            AND = {
                                event_target:target_mining_target = {
                                    owner = {
                                        religion_group = religion_group_eldar
                                    }
                                }
                                trait = elf_friend
                            }
                            AND = {
                                event_target:target_mining_target = {
                                    owner = {
                                        religion_group = religion_group_edain
                                    }
                                }
                                trait = man_friend
                            }
                        }
                    }
                    modifier = {
                        factor = 0
                        event_target:target_mining_target = {
                            owner = {
                                OR = {
                                    religion_group = religion_group_melkor
                                    religion = religion_wilderness
                                }
                            }
                        }
                    }
                    modifier = {
                        factor = 2
                        event_target:target_mining_target = {
                            owner = {
                                trait = evil_side
                            }
                        }
                    }
                    modifier = {
                        factor = 2
                        event_target:target_mining_target = {
                            owner = {
                                trait = authoritative
                            }
                        }
                    }
                    modifier = {
                        factor = 2
                        event_target:target_mining_target = {
                            owner = {
                                martial = 20
                            }
                        }
                    }
                }
                10 = {
                    set_character_flag = mining_expedition_tantrum
                    modifier = {
                        factor = 2
                        AND = {
                            OR = {
                                has_character_flag = ruler_expedition_leader
                                has_character_flag = councillor_expedition_leader
                            }
                            event_target:target_expedition_leader = {
                                NOT = { diplomacy = 10 }
                            }
                        }
                    }
                }
                10 = {
                    set_character_flag = mining_expedition_starvation
                    
                    modifier = {
                        factor = 2
                        AND = {
                            OR = {
                                has_character_flag = ruler_expedition_leader
                                has_character_flag = councillor_expedition_leader
                            }
                            event_target:target_expedition_leader = {
                                NOT = { stewardship = 10 }
                            }
                        }
                    }
                }
                10 = {
                    set_character_flag = mining_expedition_neutral

                    # aftermath - return home, then success
                    character_event = { id = dwarf_colonisation.36 days = 60 }
                    character_event = { id = dwarf_colonisation.17 days = 90 }
                }
                10 = {
                    modifier = {
                        factor = 1.5
                        stewardship = 15
                    }
                    modifier = {
                        factor = 2
                        AND = {
                            OR = {
                                has_character_flag = ruler_expedition_leader
                                has_character_flag = councillor_expedition_leader
                            }
                            event_target:target_expedition_leader = {
                                stewardship = 25
                            }
                        }
                    }
                    modifier = {
                        factor = 1.5
                        has_character_flag = ruler_expedition_leader
                    }
                    modifier = {
                        factor = 1.5
                        has_character_flag = councillor_expedition_leader
                    }
                    modifier = {
                        factor = 0.5
                        has_character_flag = bad_sponsorship
                    }
                    set_character_flag = mining_expedition_success

                    # aftermath - return home, then success
                    character_event = { id = dwarf_colonisation.36 days = 60 }
                    character_event = { id = dwarf_colonisation.17 days = 90 }
                }
                5 = {
                    modifier = {
                        factor = 1.5
                        stewardship = 25
                    }
                    modifier = {
                        factor = 2
                        AND = {
                            OR = {
                                has_character_flag = ruler_expedition_leader
                                has_character_flag = councillor_expedition_leader
                            }
                            event_target:target_expedition_leader = {
                                stewardship = 30
                            }
                        }
                    }
                    modifier = {
                        factor = 0.2
                        has_character_flag = bad_sponsorship
                    }
                    set_character_flag = mining_expedition_great_success

                    # aftermath - return home, then success
                    character_event = { id = dwarf_colonisation.36 days = 60 }
                    character_event = { id = dwarf_colonisation.17 days = 90 }
                }
            }
        }
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.10"

        trigger = {
            NOT = { has_character_flag = no_sponsorship }
        }

        add_trait = on_adventure
        prestige = 10

        hidden_tooltip = {
            if = {
                limit = { has_character_flag = mining_expedition_success }
                character_event = { id = dwarf_colonisation.15 days = 30 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.30 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_great_success }
                character_event = { id = dwarf_colonisation.16 days = 30 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.31 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_neutral }
                character_event = { id = dwarf_colonisation.14 days = 30 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.32 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_starvation }
                character_event = { id = dwarf_colonisation.11 days = 30 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.33 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_tantrum }
                character_event = { id = dwarf_colonisation.12 days = 30 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.33 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_conquered }
                character_event = { id = dwarf_colonisation.29 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.34 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_destroyed }
                character_event = { id = dwarf_colonisation.13 days = 30 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.35 days = 60 }
                }
            }
        }
	}
    option = {
		name = "EVTOPTMEP_dwarves_B.10"

        trigger = {
            NOT = { has_character_flag = no_sponsorship }
        }

        prestige = -10
        hidden_tooltip = {
            if = {
                limit = { has_character_flag = mining_expedition_success }
                character_event = { id = dwarf_colonisation.23 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.30 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_great_success }
                character_event = { id = dwarf_colonisation.24 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.31 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_neutral }
                character_event = { id = dwarf_colonisation.25 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.32 days = 60 }
                }
            }
            else_if = {
                limit = {
                    OR = {
                        has_character_flag = mining_expedition_starvation
                        has_character_flag = mining_expedition_tantrum
                    }
                }
                character_event = { id = dwarf_colonisation.26 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.33 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_conquered }
                character_event = { id = dwarf_colonisation.27 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.34 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_destroyed }
                character_event = { id = dwarf_colonisation.28 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.35 days = 60 }
                }
            }
        }
	}

    option = {
		name = "EVTOPTMEP_dwarves_C.10"

        trigger = {
            has_character_flag = no_sponsorship
        }

        prestige = -10
        hidden_tooltip = {
            if = {
                limit = { has_character_flag = mining_expedition_success }
                character_event = { id = dwarf_colonisation.30 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.30 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_great_success }
                character_event = { id = dwarf_colonisation.31 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.31 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_neutral }
                character_event = { id = dwarf_colonisation.32 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.32 days = 60 }
                }
            }
            else_if = {
                limit = {
                    OR = {
                        has_character_flag = mining_expedition_starvation
                        has_character_flag = mining_expedition_tantrum
                    }
                }
                character_event = { id = dwarf_colonisation.33 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.33 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_conquered }
                character_event = { id = dwarf_colonisation.34 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.34 days = 60 }
                }
            }
            else_if = {
                limit = { has_character_flag = mining_expedition_destroyed }
                character_event = { id = dwarf_colonisation.35 days = 60 }
                event_target:target_expedition_councillor = {
                    character_event = { id = dwarf_colonisation.35 days = 60 }
                }
            }
        }
	}
}

# THE ARRIVAL - results

narrative_event = { # failure - cannibalism
	id = dwarf_colonisation.11
    picture = GFX_evt_dwarves_mines
    title = "EVTNAMEMEP_dwarves.11"
    desc = "EVTDESCMEP_dwarves.11"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.11"
        prestige = -100
	}

    after = {
        # aftermath - return home, failure
        character_event = { id = dwarf_colonisation.37 days = 30 }
    }
}

narrative_event = { # failure - tantrum spiral
	id = dwarf_colonisation.12
    picture = GFX_evt_dwarves_mines
    title = "EVTNAMEMEP_dwarves.11"
    desc = "EVTDESCMEP_dwarves.12"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.12"
        prestige = -100
	}

    after = {
        # aftermath - return home, failure
        character_event = { id = dwarf_colonisation.37 days = 30 }
    }
}

narrative_event = { # failure - orcs
	id = dwarf_colonisation.13
    picture = GFX_evt_dwarves_mines
    title = "EVTNAMEMEP_dwarves.11"
    desc = "EVTDESCMEP_dwarves.13"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.13" # run away!
        prestige = -100
        wealth = -100

        remove_trait = brave

        random = {
            chance = 50
            add_trait = craven
        }
	}

    option = {
		name = "EVTOPTMEP_dwarves_B.13" # stand and fight!
        prestige = 500

        trigger = {
            NOT = { trait = craven }
        }

        add_trait = brave
        random_list = {
            20 = {
                add_trait_wounded_effect = yes
            }
            10 = {
                add_maimed_trait_effect = yes
            }
            10 = {
                death = { death_reason = death_battle }
            }
            60 = {
                # nothing
            }
        }
    }

    after = {
        # aftermath - return home, failure
        character_event = { id = dwarf_colonisation.37 days = 30 }
    }
}

character_event = { # occupiers interact with the dwarves
	id = dwarf_colonisation.29
    picture = GFX_evt_dwarves_mines
    title = "EVTNAMEMEP_dwarves.11"
    desc = "EVTDESCMEP_dwarves.29"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.29"
        prestige = -100
	}
    option = {
		name = "EVTOPTMEP_dwarves_B.29"
        piety = 100

        event_target:target_mining_target = {
            owner = {
                add_rival = ROOT
            }
        }
        random = {
            chance = 50
            add_trait = zealous
        }
	}
    after = {
        # aftermath - return home, failure
        character_event = { id = dwarf_colonisation.37 days = 30 }
    }
}

narrative_event = { # neutral result
	id = dwarf_colonisation.14
    picture = GFX_evt_dwarves_mines
    title = "EVTNAMEMEP_dwarves.11"
    desc = "EVTDESCMEP_dwarves.14"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.14" # let's give them their provisions at a loss.
        piety = 50

        wealth = -100

        remove_trait = greedy
	}

    option = {
		name = "EVTOPTMEP_dwarves_B.14" # fuck'em
        piety = -100

        remove_trait = charitable
    }
}

narrative_event = { # success
	id = dwarf_colonisation.15
    picture = GFX_evt_dwarves_mines
    title = "EVTNAMEMEP_dwarves.11"
    desc = "EVTDESCMEP_dwarves.15"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.15" # let's do some business!

        wealth = 600
	}
    option = {
		name = "EVTOPTMEP_dwarves_B.15" # it's yours, my friends. TODO bump up to great success
        piety = 100

        wealth = -100

        remove_trait = greedy

        # elevate to a great success!
        clr_character_flag = mining_expedition_success
        set_character_flag = mining_expedition_great_success

        event_target:target_mining_target = {
            add_province_modifier = {
                name = settled_by_colonists
                duration = 3650
            }
        }
    }
}

narrative_event = { # great success
	id = dwarf_colonisation.16
    picture = GFX_evt_dwarves_mines
    title = "EVTNAMEMEP_dwarves.11"
    desc = "EVTDESCMEP_dwarves.16"

	notification = no
    is_triggered_only = yes

    immediate = {
        event_target:target_mining_target = {
            add_province_modifier = {
                name = settled_by_colonists
                duration = 3650
            }
        }
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.16" # holy shit!
        prestige = 100

        wealth = 2000
	}
}

# aftermath events

character_event = { # colony wants to swear fealty
	id = dwarf_colonisation.17
    picture = GFX_dwarves_court
    desc = "EVTDESCMEP_dwarves.17"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.17" # welcome to the realm

        trigger = {
            event_target:target_mining_target = {
                OR = {
                    religion = religion_wilderness
                    has_empty_holding = yes
                }
            }
        }

        wealth = -100
        character_event = { id = dwarf_colonisation.18 days = 30 }
	}
    option = {
		name = "EVTOPTMEP_dwarves_B.17" # sorry, that would be impractical

        clear_mining_expedition_flags = yes
	}
}

character_event = { # colony swears fealty
	id = dwarf_colonisation.18
    picture = GFX_dwarves_court
    desc = "EVTDESCMEP_dwarves.18"

	notification = no
    is_triggered_only = yes

    trigger = {
        event_target:target_mining_target = {
            OR = {
                religion = religion_wilderness
                has_empty_holding = yes
            }
        }
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.18" # welcome to the realm
        prestige = 200

        hidden_tooltip = {
            create_character = {
                dynasty = random
                religion = ROOT
                culture = ROOT
                female = no
                age = 120
                trait = dwarven
                trait = charismatic_negotiator
            }
            new_character = {
                event_target:target_mining_target = {
                    
                    # take control away from wilderness
                    if = {
                        limit = {
                            religion = religion_wilderness
                        }
                        religion = ROOT
                        culture = ROOT
                        county = { gain_title = PREVPREV }
                    }
                    else = {
                        build_holding = { type = city holder = PREV }
                    }
                }

                # initial state of the colony
                capital_holding = {
                    convert_to = CITY
                    if = { # success
                        limit = {
                            ROOT = { has_character_flag = mining_expedition_success }
                        }
                        add_building = ct_barracks_1
                        add_building = ct_marketplace_1
                        add_building = ct_DInnerFortification_1
                        add_building = ct_dwarfmines_1

                        location = {
                            decrease_depopulation_effect = yes
                        }
                    }
                    else_if = { # great success
                        limit = {
                            ROOT = { has_character_flag = mining_expedition_great_success }
                        }
                        add_building = ct_barracks_1
                        add_building = ct_marketplace_2
                        add_building = ct_DInnerFortification_2
                        add_building = ct_dwarfmines_2
                        add_building = ct_jeweler_1

                        location = {
                            decrease_depopulation_effect = yes
                            decrease_depopulation_effect = yes
                        }
                    }
                    else = { # not much of a success
                        add_building = ct_barracks_1
                        add_building = ct_marketplace_1
                        add_building = ct_DInnerFortification_1
                    }

                    add_holding_modifier = { name = dwarven_mining_colony years = 100 }
                }
            }
	    }
        new_character = {
            set_defacto_liege = ROOT
        }
    }

    after = {
        clear_mining_expedition_flags = yes
    }
}

character_event = { # failure
	id = dwarf_colonisation.37
    picture = GFX_evt_bad_news
    desc = "EVTDESCMEP_dwarves.37"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.37"
	}

	option = {
		name = "EVTOPTMEP_dwarves_B.37"
        wealth = 100
        add_character_modifier = { name = blamed_guilds duration = 730 }
        random = {
            chance = 50
            add_trait = greedy
        }
	}

	option = {
        trigger = {
            has_character_flag = mining_expedition_destroyed
        }
        piety = 100

		name = "EVTOPTMEP_dwarves_C.37"
        random = {
            chance = 50
            add_trait = stressed
        }
        add_trait = zealous
	}

    option = {
        trigger = {
            has_character_flag = mining_expedition_conquered
        }
        piety = 50

		name = "EVTOPTMEP_dwarves_C.37"
        
        event_target:target_mining_target = {
            owner = {
                add_rival = ROOT
            }
        }
        random = {
            chance = 50
            add_trait = zealous
        }
	}

    after = {
        clear_mining_expedition_flags = yes
        remove_trait = on_adventure
    }
}

# News

character_event = { # news: success
	id = dwarf_colonisation.23
    picture = GFX_dwarves_leader
    desc = "EVTDESCMEP_dwarves.23"

	notification = no
    is_triggered_only = yes

    immediate = {
        clear_mining_expedition_flags = yes
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.23"
        wealth = 600
	}
	option = {
		name = "EVTOPTMEP_dwarves_B.23"
        wealth = 200
        custom_tooltip = {
			text = physician_apothecaries_custom_tooltip
			hidden_tooltip = {
				any_demesne_province = {
					limit = {
						NOR = {
							any_province_holding = {
								has_siege = yes
							}
							any_province_holding = {
								is_occupied = yes
							}
							has_disease = yes
						}
					}
					change_variable = { which = prosperity_value value = 15 }
				}
			}
		}
        change_stewardship = 1
    }
}

character_event = { # news: great success
	id = dwarf_colonisation.24
    picture = GFX_dwarves_leader
    desc = "EVTDESCMEP_dwarves.24"

	notification = no
    is_triggered_only = yes

    immediate = {
        clear_mining_expedition_flags = yes
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.24"
        wealth = 2000
	}
	option = {
		name = "EVTOPTMEP_dwarves_B.24"
        wealth = 300
        custom_tooltip = {
			text = physician_apothecaries_custom_tooltip
			hidden_tooltip = {
				any_demesne_province = {
					limit = {
						NOR = {
							any_province_holding = {
								has_siege = yes
							}
							any_province_holding = {
								is_occupied = yes
							}
							has_disease = yes
						}
					}
					change_variable = { which = prosperity_value value = 15 }
				}
			}
		}
        event_target:target_mining_target = {
            add_province_modifier = {
                name = settled_by_colonists
                duration = 3650
            }
        }
        change_stewardship = 1
        random = {
            chance = 50
            add_trait = charitable
        }
	}
}

character_event = { # news: poor success
	id = dwarf_colonisation.25
    picture = GFX_evt_dwarves_mines
    desc = "EVTDESCMEP_dwarves.25"

	notification = no
    is_triggered_only = yes

    immediate = {
        clear_mining_expedition_flags = yes
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.25"
	}
	option = {
        wealth = -100
		name = "EVTOPTMEP_dwarves_B.25"

        # elevate to a success!
        clr_character_flag = mining_expedition_neutral
        set_character_flag = mining_expedition_success

        character_event = { id = dwarf_colonisation.23 days = 30 }
    }
	option = {
        wealth = 100
		name = "EVTOPTMEP_dwarves_C.25"
        add_character_modifier = { name = blamed_guilds duration = 730 }
        random = {
            chance = 50
            add_trait = greedy
        }
	}
}

character_event = { # news: failure
	id = dwarf_colonisation.26
    picture = GFX_dwarves_death_battle
    desc = "EVTDESCMEP_dwarves.26"

	notification = no
    is_triggered_only = yes

    immediate = {
        clear_mining_expedition_flags = yes
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.26"
        prestige = -100
	}
	option = {
		name = "EVTOPTMEP_dwarves_B.26"
        wealth = 100
        add_character_modifier = { name = blamed_guilds duration = 730 }
        random = {
            chance = 50
            add_trait = greedy
        }
	}
}

character_event = { # news: conquered
	id = dwarf_colonisation.27
    picture = GFX_evt_bad_news
    desc = "EVTDESCMEP_dwarves.27"

	notification = no
    is_triggered_only = yes

    immediate = {
        clear_mining_expedition_flags = yes
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.27"
        prestige = -100
	}
	option = {
        piety = 50
		name = "EVTOPTMEP_dwarves_B.27"
        event_target:target_mining_target = {
            owner = {
                add_rival = ROOT
            }
        }
        random = {
            chance = 50
            add_trait = zealous
        }
	}
}

character_event = { # news: destroyed by orcs
	id = dwarf_colonisation.28
    picture = GFX_orc_leader
    desc = "EVTDESCMEP_dwarves.28"

	notification = no
    is_triggered_only = yes

    immediate = {
        clear_mining_expedition_flags = yes
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.28"
        prestige = -100
	}
	option = {
        piety = 50
		name = "EVTOPTMEP_dwarves_B.28"
        random = {
            chance = 50
            add_trait = stressed
        }
        random = {
            chance = 50
            add_trait = zealous
        }
	}
}

character_event = { # non-sponsor news: success
	id = dwarf_colonisation.30
    picture = GFX_dwarves_leader
    desc = "EVTDESCMEP_dwarves.30"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.30"
        prestige = 50
	}

    after = {
        clear_mining_expedition_flags = yes
    }
}

character_event = { # non-sponsor news: great success
	id = dwarf_colonisation.31
    picture = GFX_dwarves_leader
    desc = "EVTDESCMEP_dwarves.31"

	notification = no
    is_triggered_only = yes

    immediate = {
        event_target:target_mining_target = {
            add_province_modifier = {
                name = settled_by_colonists
                duration = 3650
            }
        }
    }

	option = {
		name = "EVTOPTMEP_dwarves_A.31"
        prestige = 100
	}

    after = {
        clear_mining_expedition_flags = yes
    }
}

character_event = { # non-sponsor news: not much of a success
	id = dwarf_colonisation.32
    picture = GFX_evt_dwarves_mines
    desc = "EVTDESCMEP_dwarves.32"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.32"
	}

    after = {
        clear_mining_expedition_flags = yes
    }
}

character_event = { # non-sponsor news: settlers died
	id = dwarf_colonisation.33
    picture = GFX_dwarves_death_battle
    desc = "EVTDESCMEP_dwarves.33"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.33"
        prestige = -50
	}

    after = {
        clear_mining_expedition_flags = yes
    }
}

character_event = { # non-sponsor news: conquered by a local lord
	id = dwarf_colonisation.34
    picture = GFX_evt_bad_news
    desc = "EVTDESCMEP_dwarves.34"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.34"
        prestige = -50
	}
	option = {
		name = "EVTOPTMEP_dwarves_B.34"

        trigger = {
            has_character_flag = sending_mining_expedition
        }

        event_target:target_mining_target = {
            owner = {
                add_rival = ROOT
            }
        }
        random = {
            chance = 50
            add_trait = zealous
        }
	}

    after = {
        clear_mining_expedition_flags = yes
    }
}

character_event = { # non-sponsor news: destroyed by orcs
	id = dwarf_colonisation.35
    picture = GFX_orc_leader
    desc = "EVTDESCMEP_dwarves.35"

	notification = no
    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.35"
        prestige = -50
	}
    option = {
        name = "EVTOPTMEP_dwarves_B.35"

        trigger = {
            has_character_flag = sending_mining_expedition
        }

        random = {
            chance = 50
            add_trait = stressed
        }
        random = {
            chance = 50
            add_trait = zealous
        }
    }

    after = {
        clear_mining_expedition_flags = yes
    }
}

character_event = { # Remove adventure trait
	id = dwarf_colonisation.36
    hide_window = yes

    notification = no
    is_triggered_only = yes

	option = {
        remove_trait = on_adventure
	}
}

letter_event = { # a new dwarf-friend
	id = dwarf_colonisation.38
    desc = "EVTDESCMEP_dwarves.38"

    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.38"
	}
}

letter_event = { # a new dwarf-enemy
	id = dwarf_colonisation.39
    desc = "EVTDESCMEP_dwarves.39"

    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.39"
        prestige = 100
	}
    option = {
        name = "EVTOPTMEP_dwarves_B.39"
        prestige = -100
        clear_mining_expedition_flags = yes
        remove_trait = on_adventure
    }
}

character_event = { # your colonists have joined morgoth? what the
	id = dwarf_colonisation.40
    desc = "EVTDESCMEP_dwarves.40"
    picture = GFX_evt_bad_news

    is_triggered_only = yes

	option = {
		name = "EVTOPTMEP_dwarves_A.40"
        piety = -100
        prestige = -100
	}
    after = {
        clear_mining_expedition_flags = yes
        remove_trait = on_adventure
    }
}
