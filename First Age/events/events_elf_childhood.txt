namespace = elfchild


####### An Elf is still a child #######
# create an adult to replace him/her as title holder? #
character_event = {
    id = elfchild.0
	hide_window = yes
	is_triggered_only = yes
	notification = no
	
	max_age = 40
	religion_group = religion_group_eldar

	trigger = {
		OR = {
			NOT = { trait = elf_childhood } # either this child doesn't have elf childhood yet
			NOT = { father = { is_father = ROOT } } # or has no father, and so shouldn't have a title
		}
	}
	
	immediate = {
		set_character_flag = random_courtier
	}
	
	option = {
		remove_spouse = yes # silly elf, you can't marry a child.
		
		if = {
			limit = {
				ROOT = {
					NOT = { father = { is_father = ROOT } } # the father is not a valid character
				}
				OR = {
					NOT = {
						host = {
							any_courtier = {
								count = 30	# we're not out of space for courtiers
							}
						}
					}
					is_patrician = yes # if I'm spawned with a title, don't kill me
				}
			}
			
			add_trait = elf_childhood
			
			random_list = {	# create a father for this child, then transfer the title.
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 205
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 310
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 580
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 1240
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 2092
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 201
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 297
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 732
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 1108
					}
				}
				10 = {
					create_character = {
						random_traits = yes
						religion = ROOT
						culture = ROOT
						female = no
						trait = elf
						age = 2903
					}
				}
			}
			
			new_character = {
				if = { # landed case
					limit = {
						ROOT = {
							OR = {
								demesne_size = 1
								is_patrician = yes
							}
						}
					}
					dynasty = ROOT
					ROOT = {
						set_father = PREV
						abdicate = { move = no }
					}
				}
				if = { # courtier case
					limit = {
						ROOT = {
							NOT = {	demesne_size = 1 }
							is_patrician = no
						}
					}
					ROOT = {
						death = { death_reason = death_missing }
					}
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					NOT = { father = { is_father = ROOT } } # the father is not a valid character
				}

				host = {
					any_courtier = {
						count = 30	# we're not out of space for courtiers
					}
				}
			}
			death = { death_reason = death_missing }
		}
	}
}

####### An Elf is now an adult #######
character_event = {
    id = elfchild.1
    title = "EVTTITelfchild.1"
    desc = "EVTDESCelfchild.1"
    picture = "GFX_evt_elven_story"
	
	trigger = {
		trait = elf_childhood
		age = 40
	}
	
	mean_time_to_happen = {
		days = 7
	}
		
	option = {
		name = "EVTOPTAelfchild.1"
		remove_trait = elf_childhood
	}
}
