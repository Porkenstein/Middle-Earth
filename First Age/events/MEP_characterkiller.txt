#####Events to stop random Maiar courtiers from appearing####

##We start by giving the Dark Lord some courtiers to fill their court##

namespace = characterkiller

##Dark Lord / Dragon Lord gets courtiers##
	character_event = {
    id = characterkiller.1
    title = "EVTTITcharacterkiller.1"#Your Court
    desc = "EVTDESCcharacterkiller.1"#In angband, many of your most capable lieutenants reside. They handle the daily tasks of running your realm, and keep your unruly legions under control.
    picture = "GFX_good"

	trigger = {
		has_landed_title = c_angband
		NOT = { has_character_flag = characterkiller1 }
		year = 4312
		NOT = { year = 4312 }
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "EVTOPTAcharacterkiller.1"#It's good to have servants.
		set_character_flag = characterkiller1
		create_random_soldier = {
			dynasty = none
			religion = religion_umaiar
			culture = culture_umaiar
			female = no
			age = 4000
			attributes = {
				martial = 15
				diplomacy = 9
				stewardship = 8
				intrigue = 15
				learning = 3
			}
			health = 100
			fertility = 0.0
			trait = maiar
			trait = brilliant_strategist
			trait = diligent
			trait = proud
			trait = cruel
			trait = hedonist
			trait = evil_side
			trait = wroth
			trait = ambitious
			trait = fair
			trait = impaler
		}
		create_random_soldier = {
			dynasty = none
			religion = religion_umaiar
			culture = culture_umaiar
			female = no
			age = 4000
			attributes = {
				martial = 15
				diplomacy = 9
				stewardship = 8
				intrigue = 15
				learning = 3
			}
			health = 100
			fertility = 0.0
			trait = maiar
			trait = brilliant_strategist
			trait = diligent
			trait = proud
			trait = cruel
			trait = evil_side
			trait = ambitious
			trait = impaler
			trait = werewolf
		}
		create_random_soldier = {
			dynasty = none
			religion = religion_umaiar
			culture = culture_umaiar
			female = yes
			age = 4000
			attributes = {
				martial = 15
				diplomacy = 9
				stewardship = 8
				intrigue = 15
				learning = 3
			}
			health = 100
			fertility = 0.0
			trait = maiar
			trait = elusive_shadow
			trait = diligent
			trait = proud
			trait = cruel
			trait = evil_side
#			trait = attractive
			trait = fair
			trait = ambitious
			trait = impaler
			trait = vampire
		}
		create_random_soldier = {
			dynasty = none
			religion = religion_umaiar
			culture = culture_noldor
			female = no
			age = 3000
			attributes = {
				martial = 9
				diplomacy = 12
				stewardship = 8
				intrigue = 15
				learning = 9
			}
			health = 50
			fertility = 0.7
			trait = intricate_webweaver
			trait = elf
			trait = proud
			trait = cruel
			trait = evil_side
			trait = kinslayer
			trait = strong
			trait = greedy
		}
		create_random_soldier = {
			dynasty = none
			religion = religion_mahal
			culture = culture_blacklock
			female = no
			age = 100
			attributes = {
				martial = 14
				diplomacy = 8
				stewardship = 14
				intrigue = 8
				learning = 7
			}
			health = 25
			fertility = 0.7
			trait = midas_touched
			trait = dwarf
			trait = proud
			trait = cruel
			trait = evil_side
			trait = kinslayer
			trait = strong
			trait = greedy
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_easterlings
			culture = culture_baradhrim
			female = no
			age = 34
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_easterlings
			culture = culture_baradhrim
			female = no
			age = 31
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_orkish
			culture = culture_orkish
			female = no
			age = 21
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_orkish
			culture = culture_orkish
			female = no
			age = 23
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_orkish
			culture = culture_orkish
			female = no
			age = 32
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_orkish
			culture = culture_orkish
			female = no
			age = 42
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_orkish
			culture = culture_orkish
			female = no
			age = 70
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = none
			religion = religion_orkish
			culture = culture_orkish
			female = no
			age = 52
		}
	}
}

##Now to kill any umaiar that is below the age of 100 - killing was buggy, change culture instead##
character_event = {
    id = characterkiller.3
    title = "EVTTITcharacterkiller.3"
    desc = "EVTDESCcharacterkiller.3"#Ainur characters are not supposed to be randomly spawned.
    picture = "GFX_good"

	trigger = {
		OR = {
			culture = culture_umaiar
			culture = culture_balrog
			culture = culture_valar
            culture = culture_dragons
		}
        NOT = { father = { is_father = ROOT } }
        OR = {
            culture = culture_dragons
            AND = {
                NOT = { culture = culture_dragons }
                NOT = { age = 100 } # generated non-dragon character
            }
        }
	}

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "EVTOPTAcharacterkiller.3"#Goodbye, cruel world!
		ROOT = {
			culture = culture_orkish
			religion = religion_orkish
			set_graphical_culture = culture_orkish
		}
	}
}

##Now to kill any Orc/Goblin in a Good Court ##
character_event = {
    id = characterkiller.5
    title = "EVTTITcharacterkiller.5"#You are orcish
    desc = "EVTDESCcharacterkiller.5"
    picture = "GFX_good"

	trigger = {
		culture_group = culture_group_melkor
		liege = {
			NOT = { culture_group = culture_group_melkor }
			NOT = { religion = religion_umaiar }
			NOT = { trait = evil_side }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		remove_spouse = ROOT
        death = {
		    death_reason = death_missing
		}
    }

	option = {
        name = "EVTOPTAcharacterkiller.5"#Goodbye, cruel world!
    }
}

##Now to kill any wilderness who is landless ##
character_event = {
    id = characterkiller.6
    title = "EVTTITcharacterkiller.6"#You are wilderness
    desc = "EVTDESCcharacterkiller.6"#Wilderness are not meant to be landless
    picture = "GFX_good"

	trigger = {
		religion = religion_wilderness
		is_ruler = no
		NOT = { has_global_flag = wilderness_cull }
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
        death = {
		    death_reason = death_missing
		}
		set_global_flag = wilderness_cull
    }

	option = {
        name = "EVTOPTAcharacterkiller.6"#Goodbye, cruel world!
    }
}

# Randomly generated Maiar to Elves
character_event = {
    id = characterkiller.7
    title = "EVTTITcharacterkiller.7"
    desc = "EVTDESCcharacterkiller.7"#Ainur characters are not supposed to be randomly spawned.
    picture = "GFX_good"

	trigger = {
		culture = culture_maiar
        NOT = { age = 100 }
    }

	mean_time_to_happen = {
		days = 1
	}

	option = {
		name = "EVTOPTAcharacterkiller.7"#Goodbye, cruel world!
        location = {
            ROOT = { culture = PREV }
            ROOT = { religion = PREV }
        }
		set_graphical_culture = culture_doriathrim
	}
}

## dispose of courtier in some random manner ##
character_event = {
	id = characterkiller.2
	hide_window = yes
	
	is_triggered_only = yes
	
	option = {
		random_list = {	# contrive a fate for this character
			20 = {
				death = { death_reason = death_at_sea }
				modifier = {
					factor = 2
					culture = culture_falathrim
				}
				modifier = {
					factor = 2
					location = {
						port = yes
					}
				}
				modifier = {
					factor = 0
					culture = culture_orkish
				}
				modifier = {
					factor = 0
					NOT = {
						top_liege = {
							any_realm_province = {
								port = yes
							}
						}
					}
				}
			}
			20 = {
				death = { death_reason = death_battle }
				modifier = {
					liege = { war = no }
					factor = 0
				}
			}
			100 = {
				death = { death_reason = death_suicide }
				modifier = {
					factor = 0
					NOT = { trait = depressed }
					NOT = { trait = stressed }
				}
			}
			30 = {
				death = { death_reason = death_execution_eaten }
				modifier = {
					factor = 0
					NOT = {
						liege = {
							culture = culture_orkish
						}
					}
				}
			}
			5 = {
				death = { death_reason = death_missing }
			}
			5 = {
				death = { death_reason = death_accident }
			}
			5 = {
				death = { death_reason = death_accident_boar }
			}
			5 = {
				death = { death_reason = death_accident_arrow }
			}
			5 = {
				death = { death_reason = death_accident_fall }
			}
			5 = {
				death = { death_reason = death_accident_drowning }
				modifier = {
					factor = 2
					culture = culture_falathrim
				}
				modifier = {
					factor = 2
					location = {
						port = yes
					}
				}
			}
			10 = {
				add_trait = at_east
				character_event = { id = at_east.0 }
			}
		}
	}
}

####### Purge courts of bloat caused by undying courtiers #######
character_event = {
    id = characterkiller.0
	hide_window = yes
	is_triggered_only = yes
	notification = no
	
	#friends = no
	#rivals = no
	#prisoner = no
	#ai = yes
	#is_in_society = no
	
	max_age = 40
	
	trigger = {
		
		# long-lived randomly generated courtier types
		# this is fixed for elves in the elf childhood events
		OR = {
			culture_group = culture_group_dwarves
			culture_group = culture_group_melkor
		}
		
		# no father
		ROOT = {
			NOT = { father = { is_father = ROOT } } 
		}
		
		# insignificant
		#has_landed_title = no
		#has_job_title = no
		#has_children = no
		#is_married = no
		
		#has_lover = no
		#has_minor_title = no
		#is_guardian = no
		#is_pregnant = no
		
		
		# don't do this in the player's court. too annoying
		host = { ai = yes }
		
		# in a large court
		host = {
			any_courtier = {
				count = 30	# we're out of space for new courtiers
			}
		}
	}
	
	option = {
		death = { death_reason = death_missing }
	}
}

####### Purge extra large courts more aggressively #######
character_event = {
    id = characterkiller.4
	hide_window = yes
	is_triggered_only = yes
	notification = no
	
	#friends = no
	#rivals = no
	#prisoner = no
	#ai = yes
	#is_in_society = no
		
	trigger = {
		
		# sometimes courts get too big from fleeing courtiers.
		
		# no father
		ROOT = {
			NOT = { father = { is_father = ROOT } } 
		}
		
		# insignificant
		ROOT = {
			NOR = {
				demesne_size = 1
				is_patrician = yes
			}
		}
		
		#has_job_title = no
		#has_children = no
		#is_married = no
		
		#has_lover = no
		#has_minor_title = no
		#is_guardian = no
		#is_pregnant = no
		
		
		# don't do this in the player's court. too annoying
		host = { ai = yes }
		
		# in a large court
		host = {
			any_courtier = {
				count = 100	# this court is too damn big
			}
		}
	}
	
	option = {
		character_event = { id = characterkiller.2 }
	}
}