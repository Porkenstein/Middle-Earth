
### COLONISATION TRIGGERS ###

# used from province scope
has_depopulation_effect = {
	custom_tooltip = {
		text = has_depopulation_effect_tooltip
		hidden_tooltip = {
			OR = {
				has_province_modifier = depopulated_1
				has_province_modifier = depopulated_2
				has_province_modifier = depopulated_3
			}
		}
	}
}

# used from province scope
has_prosperity_effect = {
	custom_tooltip = {
		text = has_prosperity_effect_tooltip
		hidden_tooltip = {
			OR = {
				has_province_modifier = prosperity_modifier_1
				has_province_modifier = prosperity_modifier_2
				has_province_modifier = prosperity_modifier_3
			}
		}
	}
}

### PROVINCE INFO ###
has_hidden_resources = {
	OR = {
		has_province_flag = flag_iron
		has_province_flag = flag_magma
		has_province_flag = flag_copper
		has_province_flag = flag_tin
		has_province_flag = flag_stone
		has_province_flag = flag_gold
		has_province_flag = flag_silver
		has_province_flag = flag_gemstones
		has_province_flag = flag_lapis
		has_province_flag = flag_salt
	}
}

### PROVINCE INFO ###
has_known_resources = {
	OR = {
		has_province_modifier = resource_iron
		has_province_modifier = resource_magma
		has_province_modifier = resource_copper
		has_province_modifier = resource_tin
		has_province_modifier = resource_stone
		has_province_modifier = resource_gold
		has_province_modifier = resource_silver
		has_province_modifier = resource_gemstones
		has_province_modifier = resource_lapis
		has_province_modifier = resource_salt
	}
}

### CHARACTER TRIGGERS ###
is_in_court = {
	NOT = { trait = sailed_west }
	NOT = { trait = at_east }
	NOT = { trait = in_helcaraxe }
	NOT = { trait = at_khazad_dum }
	NOT = { trait = on_pilgrimage }
}

is_capable_in_court = {
	age = 16
	is_incapable = no
	NOT = { trait = sailed_west }
	NOT = { trait = at_east }
	NOT = { trait = in_helcaraxe }
	NOT = { trait = at_khazad_dum }
	NOT = { trait = on_pilgrimage }
	NOT = { trait = imbecile }
}

is_mighty_trigger = {
	OR = {
		trait = titanic
		religion = religion_eruhini
		religion = religion_umaiar
		religion = religion_dragons
		martial = 40
		combat_rating = 20
	}
}

not_both_elves_no_kinslaying = {
	OR = {
		has_game_rule = {
			name = elf_war_rule
			value = sandbox
		}
		custom_tooltip = {
			text = TOOLTIPELFWARPROHIBITION
			hidden_tooltip = {
				NAND = { #eldar do not make war on eachother
					ROOT = {
						religion_group = religion_group_eldar
						NOT = { trait = kinslayer }
						NOT = { trait = evil_side }
					}
					FROM = {
						religion_group = religion_group_eldar
						NOT = { trait = kinslayer }
						NOT = { trait = evil_side }
					}
				}
			}
		}
	}
}

not_this_and_root_elves_or_exception = {
	hidden_tooltip = {
		NAND = { # eldar do not execute each other
			ROOT = { #executer
				religion_group = religion_group_eldar
				NOT = { trait = kinslayer }
				NOT = { trait = evil_side }
				NOT = { trait = cruel }
				NOT = { trait = authoritative }
			}
			PREV = { # executee
				religion_group = religion_group_eldar
			}
		}
	}
}

is_elf_culture = {
	OR = {
		culture_group = culture_group_amanyar
		culture_group = culture_group_aumanyar
		culture_group = culture_group_moriquendi
		culture_group = culture_group_umanyar
	}
}

is_open_elective_title_only = {
	OR = {
		mercenary = yes
		holy_order = yes
	}
}

is_human_religion = { # first age only
	OR = {
		religion_group = religion_group_edain
		religion_group = religion_group_hildor
		religion_group = religion_group_forodwaith
	}
}

is_human_culture = { # first age only
	OR = {
		culture_group = culture_group_edain
		culture_group = culture_group_forodwaith
		culture_group = culture_group_easterling
	}
}

is_dueling_culture = {
	OR = {
		is_human_culture = yes
		culture_group = culture_group_melkor
		culture_group = culture_group_dwarves
		culture_group = culture_group_moriquendi
	}
}

is_primitive_culture = { # first age only
	OR = {
		culture_group = culture_group_aumanyar
		culture_group = culture_group_moriquendi
		culture = culture_kul_uruk
		AND = {
			is_human_culture = yes
			NOT = { is_civilized_human_culture = yes }
		}
	}
}

is_civilized_human_culture = {
	OR = {
		culture = culture_brethilrim
		culture = culture_hadoran
		culture = culture_boradin
	}
}

is_nomadic_human = { # edain, baradhrim, forodwaith hosts
	is_nomadic = yes
	is_human_culture = yes
}

is_tribal_human = { # edain, baradhrim, forodwaith hosts and tribes
	OR = {
		is_tribal = yes
		is_nomadic = yes
	}
	is_human_culture = yes
}

is_orc_culture = { # first age only
	OR = {
		culture = culture_goblin
		culture = culture_orkish
		culture = culture_kul_uruk
		culture = culture_angbandim
	}
}

is_gavelkind_only = { # can only use gavelkind
	is_primitive_culture = yes
	NOT = {
		religion_group = religion_group_eldar
	}
}

is_haven_culture = {
	OR = {
		culture = culture_noldor
		culture = culture_falathrim
	}
}

can_execute_innocents = {
	OR = {
		NOT = { religion_group = religion_group_eldar }
		trait = evil_side
		trait = cruel
		trait = ruthless
		trait = wroth
		trait = blood_thirsty
		trait = torturer
		trait = impaler
		trait = lunatic
	}
}

has_warrior_skill = {
	OR = {
		trait = good_rider
		trait = great_rider
		trait = horse_master
		
		trait = orc_warrior
		trait = strong_orc
		trait = great_orc
		
		trait = trained_elf
		trait = great_elf
		trait = legendary_warrior
		
		trait = trained_dwarf
		trait = great_axeman
		trait = dragon_slayer
		
		trait = skilled_bowman
		trait = great_bowman
		trait = master_bowman
		
		trait = adept_fighter
		trait = skilled_fighter
		trait = master_fighter
	}
}

is_great_warrior = {
	OR = {
		trait = great_rider
		trait = horse_master
		
		trait = strong_orc
		trait = great_orc
		
		trait = great_elf
		trait = legendary_warrior
		
		trait = great_axeman
		trait = dragon_slayer
		
		trait = great_bowman
		trait = master_bowman
		
		trait = skilled_fighter
		trait = master_fighter
	}
}

is_legendary_warrior = {
	OR = {
		trait = horse_master
		
		trait = great_orc
		
		trait = legendary_warrior
		
		trait = dragon_slayer
		
		trait = master_bowman
		
		trait = master_fighter
	}
}

is_dark_lord = {
	OR = {
		has_character_flag = morgoth
		AND = {
			religion_group = religion_group_melkor
			has_landed_title = e_dor_daedeloth
		}
	}
}

can_overthrow_liege = {
	liege = { NOT = { is_dark_lord = yes } }
	OR = {
		NOR = {
			religion_group = religion_group_eldar
			religion_group = religion_group_khazad
		}
		NOT = { religion_group = ROOT }
		trait = evil_side
		liege = { trait = evil_side }
	}
}

is_mining_target = { # by dwarves
	OR = {
		terrain = hills
		terrain = forest
		terrain = mountain
	}
}

can_send_mining_expedition = {
	independent = yes
	war = no
	has_regent = no
	religion = religion_mahal
	
	any_courtier_or_vassal = {
		is_councillor = yes
		NOT = { has_character_flag = sending_mining_expedition }
	}

	NOT = { has_character_flag = sending_mining_expedition }
}

in_hidden_province = {
	location = {
		OR = {
			county = {
				has_title_flag = flag_hidden
			}
			duchy = {
				has_title_flag = flag_hidden
			}
			kingdom = {
				has_title_flag = flag_hidden
			}
			empire = {
				has_title_flag = flag_hidden
			}
		}
	}
}

is_hidden_realm = {
	has_title_flag = flag_hidden
}

is_unattractive_colonisation_target = {
	OR = {
		region = custom_lothlann_steppe
		region = custom_anach
		region = world_iron_mountains
		has_province_modifier = tainted
		has_province_modifier = hidden_place
		has_province_modifier = girdle_of_melian
		has_province_modifier = infested
	}
}

is_elf_friend = {
	OR = {
		any_liege = { religion_group = religion_group_eldar }
		any_suzerain = { religion_group = religion_group_eldar }
		trait = elf_friend
	}
}

is_evil_friend = {
	OR = {
		any_liege = { religion_group = religion_group_melkor }
		any_suzerain = { religion_group = religion_group_melkor }
		trait = evil_side
	}
}

can_convert_to_haven = {
	is_haven_culture = yes
}

can_convert_to_feudalism_ind = {
	OR = {
		NOT = { is_primitive_culture = yes }
		higher_tier_than = DUKE
	}
}

can_convert_to_feudalism_vassal = {
	liege = {
		is_feudal = yes
	}
}

# HOLY FURY TRIGGERS

is_coronation_race = { # race with self-righteous ceremony and legal tradition
	OR = {
		religion_group = religion_group_eldar
		religion_group = religion_group_khazad
	}
}

is_coronated = {
	OR = {
		trait = crowned_by_priest
		trait = crowned_by_bishop
		trait = crowned_by_pope
		trait = crowned_by_myself
	}
}

is_infertile = {
	OR = {
		trait = human_infertility
		trait = dwarven_infertility
		trait = elven_infertility
	}
}

is_able_to_human_sacrifice = {
	OR = {
		mep_is_evil_side_trigger = yes
		has_religion_feature = religion_ritual_sacrifice
		religion = religion_anach
		religion = religion_easterlings
		religion = religion_lossoth
	}
}

has_sorcerer_skill = {
	OR = {
		trait = master_sorcerer
		trait = sorcerer
		trait = witch
	}
}

# note - this breaks when in observer mode!
is_not_player_capital_county = {
	# comment this out to allow detection of player capital counties
	always = yes
	
	# comment this out to use observer mode
	#NOT = {
	#	any_player = {
	#		capital_scope = {
	#			county = {
	#				title = PREVPREVPREV
	#			}
	#		}
	#	}
	#}
}

is_not_owner_capital_province = {
	NOT = {
		owner = {
			capital_scope = {
				county = {
					title = PREVPREVPREV
				}
			}
		}
	}
}

is_edain_entry_province = {
	OR = {
		province_id = 187
		province_id = 186
		province_id = 181
		province_id = 178
		province_id = 184
		province_id = 259
		province_id = 257
		province_id = 188
	}
}

same_de_jure_kingdom_as_root = {
	capital_scope = {
		kingdom = {
			ROOT = {
				capital_scope = {
					kingdom = {
						title = PREVPREVPREV
					}
				}
			}
		}
	}
}

is_ai_elf = {
	ai = yes
	religion_group = religion_group_eldar
}

silmarillion_is_marriage_adult = {
	is_marriage_adult = yes
	NOT = { trait = elf_childhood }
}

silmarillion_can_be_fat = {
	OR = {
		religion = religion_mahal
		religion = religion_orkish
		religion = religion_dragons
		is_human_religion = yes
	}
}

silmarillion_can_be_thin = {
	NOR = {
		religion = religion_eruhini
		religion = religion_umaiar
	}
}
